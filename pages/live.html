<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>GoalZone | ุงููุจุงุฑูุงุช ุงููุจุงุดุฑุฉ</title>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Tajawal:wght@300;400;500;700;900&display=swap" rel="stylesheet"/>
<link rel="stylesheet" href="../css/main.css"/>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
</head>
<body>

<header class="header">
  <div class="header-inner">
    <div class="logo"><div class="logo-ball">โฝ</div><a href="../index.html" style="color:inherit">GOALZONE</a></div>
    <nav class="nav" id="main-nav">
      <a class="nav-a" href="../index.html">ุงูุฑุฆูุณูุฉ</a>
      <a class="nav-a nav-live on" href="live.html"><span class="live-dot"></span> ูุจุงุดุฑ</a>
      <a class="nav-a" href="news.html">ุงูุฃุฎุจุงุฑ</a>
      <a class="nav-a" href="watch.html">๐ด ุจุซ ูุจุงุดุฑ</a>
    </nav>
    <div class="header-actions" style="display:flex;align-items:center;gap:10px;margin-right:auto">
      <div class="lang">
        <button class="lang-btn on" data-lang-btn="ar" onclick="setLang('ar')">ุน</button>
        <button class="lang-btn"    data-lang-btn="fr" onclick="setLang('fr')">FR</button>
        <button class="lang-btn"    data-lang-btn="en" onclick="setLang('en')">EN</button>
      </div>
      <button class="theme-btn" onclick="toggleTheme()">โ๏ธ</button>
      <div id="auth-area"><button class="btn-signin" onclick="openLoginModal()">ุชุณุฌูู ุฏุฎูู</button></div>
      <button class="burger" onclick="toggleNav()">โฐ</button>
    </div>
  </div>
</header>

<div class="ticker">
  <div class="ticker-label">๐ด LIVE</div>
  <div style="overflow:hidden;flex:1"><div class="ticker-track" id="ticker-track"><span class="ticker-item">ุฌุงุฑู ุงูุชุญููู...</span></div></div>
</div>

<!-- Live Header -->
<div class="live-header">
  <div class="container">
    <div class="live-title"><div class="live-pulse"></div> ุงููุจุงุฑูุงุช ุงูุฌุงุฑูุฉ ุงูุขู</div>
    <p class="live-sub">ูุชุญุฏุซ ุชููุงุฆููุง ูู 30 ุซุงููุฉ ยท <span id="last-upd">โ</span></p>
  </div>
</div>

<div class="live-counters">
  <div class="lc"><div class="lc-n" id="live-total">โ</div><div class="lc-l">ูุจุงุฑุงุฉ ุฌุงุฑูุฉ</div></div>
  <div class="lc"><div class="lc-n" id="goals-today">โ</div><div class="lc-l">ูุฏู ุงูููู</div></div>
  <div class="lc"><div class="lc-n" id="leagues-today">โ</div><div class="lc-l">ุจุทููุฉ</div></div>
</div>

<main class="page" style="padding-top:20px">
  <div class="container">
    <div class="filters" style="margin-bottom:18px">
      <button class="fbtn on" data-f="all"    onclick="setFilter('all')">ุงููู</button>
      <button class="fbtn" data-f="ucl"        onclick="setFilter('ucl')">๐ ุฃุจุทุงู ุฃูุฑูุจุง</button>
      <button class="fbtn" data-f="epl"        onclick="setFilter('epl')">๐ด๓ง๓ข๓ฅ๓ฎ๓ง๓ฟ ุงูุฅูุฌููุฒูุฉ</button>
      <button class="fbtn" data-f="laliga"     onclick="setFilter('laliga')">๐ช๐ธ ุงูุฅุณุจุงููุฉ</button>
      <button class="fbtn" data-f="bundesliga" onclick="setFilter('bundesliga')">๐ฉ๐ช ุงูุฃููุงููุฉ</button>
      <button class="fbtn" data-f="serie_a"    onclick="setFilter('serie_a')">๐ฎ๐น ุงูุฅูุทุงููุฉ</button>
      <button class="fbtn" data-f="saudi"      onclick="setFilter('saudi')">๐ธ๐ฆ ุงูุณุนูุฏูุฉ</button>
    </div>
    <div id="matches-feed"></div>
  </div>
</main>

<footer class="footer" style="margin-top:40px">
  <div class="footer-bottom">Developed by <strong>Mohammed Gharouadi</strong> ยฉ2026</div>
</footer>

<!-- Match Modal -->
<div class="overlay" id="match-modal">
  <div class="modal" style="max-width:640px">
    <button class="modal-x" onclick="closeMatch()">โ</button>
    <div class="modal-head"></div>
    <div class="modal-body" id="match-body"></div>
  </div>
</div>

<!-- Login Modal -->
<div class="overlay" id="login-modal">
  <div class="modal auth-modal">
    <button class="modal-x" onclick="closeModal('login-modal')">โ</button>
    <div class="auth-modal-body">
      <div class="modal-title">ุชุณุฌูู ุงูุฏุฎูู</div>
      <button class="google-btn" onclick="signInGoogle()">ุงูุฏุฎูู ุจู Google</button>
      <div class="divider">ุฃู</div>
      <input id="li-email" class="inp" type="email" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู"/>
      <input id="li-pass"  class="inp" type="password" placeholder="ูููุฉ ุงููุฑูุฑ"/>
      <button class="btn-submit-full" onclick="signInEmail()">ุฏุฎูู</button>
    </div>
  </div>
</div>

<div class="vip-modal" style="display:none" id="vip-modal"></div>
<div class="toast" id="toast"></div>

<script src="../js/i18n.js"></script>
<script src="../js/api.js"></script>
<script src="../js/auth.js"></script>
<script src="../js/matches.js"></script>
<script src="../js/main.js"></script>
<script>
// Override fetchAndRender to only fetch LIVE matches
async function fetchAndRender() {
  const feed = document.getElementById('matches-feed');
  if (!feed) return;
  feed.innerHTML = `<div class="spinner-wrap"><div class="spin"></div><p style="color:var(--muted);font-size:.85rem">ุฌุงุฑู ุชุญููู ุงููุจุงุฑูุงุช ุงูุฌุงุฑูุฉ...</p></div>`;

  allFixtures = await API.live();

  const upd = document.getElementById('last-upd');
  if (upd) upd.textContent = 'ุขุฎุฑ ุชุญุฏูุซ: ' + new Date().toLocaleTimeString('ar-EG');

  if (!allFixtures.length) {
    feed.innerHTML = `<div class="empty"><div class="empty-icon">๐ก</div><p>ูุง ุชูุฌุฏ ูุจุงุฑูุงุช ุฌุงุฑูุฉ ุงูุขู</p></div>`;
    syncCounters(); return;
  }
  renderFeed();
  syncCounters();
}

document.addEventListener('DOMContentLoaded', async () => {
  fetchAndRender();
  buildTicker();
  // Auto-refresh every 30s
  setInterval(() => fetchAndRender(), 30000);
});
</script>
</body>
</html>
